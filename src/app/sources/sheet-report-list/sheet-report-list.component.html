<div class="col-lg-12 col-md-12 bg-white px-4 pt-3">
  <div class="p-col-12 page-title">
    لیست نقد و بررسی بره پژوهش
  </div>

  <div class="p-col-12 p-grid">

    <p-table #dt [value]="searchResult" dataKey="id"
             [totalRecords]="totalRecords"
             [(selection)]="result"
             [lazy]="true" (onLazyLoad)="loadReports($event)"
             [rows]="pageSize" [showCurrentPageReport]="true" [rowsPerPageOptions]="[5,10,20]" styleClass="p-datatable-customers"
             [paginator]="true" currentPageReportTemplate="نمایش {first} تا {last} از {totalRecords} رکورد"
             filterDelay="3000" [globalFilterFields]="['resourceTitle','sheetTitle']">
      <ng-template pTemplate="caption">
        <div class="table-header">
          لیست نقد و بررسی ها
        </div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 20%" pSortableColumn="resourceTitle">عنوان منبع</th>

          <th style="width: 20%" pSortableColumn="sheetTitle">عنوان برگه</th>

          <th style="width: 15%" pSortableColumn="type">نوع نقد</th>

          <th style="width: 15%" pSortableColumn="createdDate">تاریخ ایجاد</th>
          <th style="width: 10%" pSortableColumn="likeCount">تعداد موافق</th>
          <th style="width: 10%" pSortableColumn="disLikeCount">تعداد مخالف</th>
          <th style="width: 10%" pSortableColumn="status">وضعیت</th>

        </tr>
        <tr>

          <th style="width: 20%"><input type="text" [(ngModel)]="example.resourceTitle" (keyup)="onchange($event, 'resourceTitle')" placeholder="عنوان منبع" class="p-column-filter table-text-search"></th>

          <th style="width: 20%"><input type="text" [(ngModel)]="example.sheetTitle" (keyup)="onchange($event, 'sheetTitle')" placeholder="عنوان برگه" class="p-column-filter table-text-search"></th>
          <th style="width: 15%;"></th>
          <th style="width: 15%"></th>
          <th style="width: 10%"></th>
          <th style="width: 10%"></th>
          <th style="width: 10%"></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item>
        <tr style="cursor: pointer" (click)="checkForReturn(item)">

          <td>
            {{item.resourceTitle}}
          </td>
          <td>
            {{item.sheetTitle}}
          </td>
          <td>
            {{item.type | sheetReportType}}
          </td>
          <td>
            {{item.createdDate | persianDate}}
          </td>
          <td>
            {{item.likeCount}}
          </td>
          <td>
            {{item.disLikeCount}}
          </td>
          <td>
            {{ item.status==null?'صف بررسی':(item.status==true?'تایید شده': 'رد شده')}}
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="6">موردی یافت نشد</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
