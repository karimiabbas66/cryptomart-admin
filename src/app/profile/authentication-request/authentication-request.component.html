<div class="col-lg-12 col-md-12 bg-white px-4 pt-3">
  <div class="p-col-12 page-title">
    لیست درخواست های احراز هویت
  </div>

  <div class="p-col-12 p-grid">

    <p-table #dt [value]="searchResult" dataKey="id"
             [totalRecords]="totalRecords"
             [(selection)]="result"
             [lazy]="true" (onLazyLoad)="loadProfiles($event)"
             (sortFunction)="customSort($event)" [customSort]="true"
             [rows]="pageSize" [showCurrentPageReport]="true" [rowsPerPageOptions]="[5,10,20]" styleClass="p-datatable-customers"
             [paginator]="true" currentPageReportTemplate="نمایش {first} تا {last} از {totalRecords} رکورد"
             filterDelay="3000" [globalFilterFields]="['username','mainPhone','nationalCode']">
      <ng-template pTemplate="caption">
        <div class="table-header">
          لیست درخواست ها
        </div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 20%" pSortableColumn="username">نام کاربری</th>

          <th style="width: 15%" pSortableColumn="nationalCode">کد ملی</th>

          <th style="width: 15%" pSortableColumn="mainPhone">شماره تماس</th>

          <th style="width: 20%" pSortableColumn="mainPhone">تاریخ ایجاد</th>
          <th style="width: 20%" pSortableColumn="mainPhone">تاریخ بررسی</th>
          <th style="width: 10%" pSortableColumn="mainPhone">وضعیت</th>

        </tr>
        <tr>

          <th style="width: 20%"><input type="text" [(ngModel)]="example.username" (keyup)="onchange($event, 'username')" placeholder="نام کاربری" class="p-column-filter table-text-search"></th>

          <th style="width: 15%"><input type="text" [(ngModel)]="example.nationalCode" (keyup)="onchange($event, 'nationalCode')" placeholder="کد ملی" class="p-column-filter table-text-search"></th>
          <th style="width: 15%; overflow: hidden"><input type="text" [(ngModel)]="example.mainPhone" (keyup)="onchange($event, 'mainPhone')" placeholder="شماره تماس" class="p-column-filter table-text-search"></th>
          <th style="width: 20%"></th>
          <th style="width: 20%"></th>
          <th style="width: 10%"></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item>
        <tr style="cursor: pointer" (click)="checkForReturn(item)">

          <td>
            {{item.username}}
          </td>
          <td>
            {{item.nationalCode}}
          </td>
          <td>
            {{item.mainPhone}}
          </td>
          <td>
            {{item.requestDate | persianDate}}
          </td>
          <td>
            {{item.changeStatusDate | persianDate}}
          </td>
          <td>
            {{ item.status==null?'صف بررسی':(item.status==true?'تایید شده': 'رد شده')}}
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="6">موردی یافت نشد</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
